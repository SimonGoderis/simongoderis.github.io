<!DOCTYPE html>
<html>
<head>
  <!-- Standard Meta -->
  <title>Index</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <link rel="icon" sizes="192x192" href="../img/icon.png">

  <!-- CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <!-- JS -->
  <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
        <div class="col-lg-3"></div>
        <div class="col-lg-6">
        <div class="card" style="margin-top: 15px;">
            <div class="card-body">
              <h5 class="card-title">Skype</h5>
              <p class="card-text">Via de link hieronder krijg je rechtstreeks toegang tot de skype-call!</p>
              <a href="#" class="btn btn-outline-dark">Meedoen!</a>
            </div>
        </div>
        <div class="mt-2"></div>
        <div class="row">
            <div class="col-6 col-md-4 col-lg-3"><a href="./index.html" class="btn btn-outline-primary btn-block">‚Üê Links</a></div>
            <div class="col-3 col-md-6 col-lg-7"></div>
            <div class="col-3 col-md-2"><button type="button" class="btn btn-outline-primary btn-block" id="counter">60</button></div>
        </div>
        <div class="mt-2"></div>
        <div class="list-group">
            <a href="#" class="list-group-item list-group-item-action disabled active">
                Tussenstand
            </a>
                <table class="table table-hover">
                    <caption id="caption"></caption>
                    <thead class="thead-dark"> 
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Team</th>
                        <th scope="col">Score</th>
                      </tr>
                    </thead>
                    <tbody id="tablebody">
                        <!-- Wordt dynamisch gevuld. Hieronder wel een warning dat dit aangevuld wordt -->
                        <tr>
                            <th colspan="3" class="table-warning text-center">
                                Gegevens worden opgehaald!
                            </th>
                        </tr>
                    </tbody>
                  </table>
          </div>
        </div>
        <div class="col-lg-3"></div>
        <div class="mt-2"></div>
        </div>
    </div>
</body>
<script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
<script type='text/javascript'>    
  var publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/1oFHAUBxUSEpRxUcdiMr2SW9hnz7jDXEN1lFC40hKpVo/edit?usp=sharing';

  function init() {
    Tabletop.init( { key: publicSpreadsheetUrl,
                     callback: showInfo,
                     simpleSheet: true } )
  }

  function showInfo(data, tabletop) {
    data = data.sort(function(a, b) {
    return b.Totaal - a.Totaal;
    });
    console.log(data);
    document.getElementById('tablebody').innerHTML = "";
    lengte = data.length;
    for (i = 0; i < lengte; i++) {
        if (data[i].Team != "") {
            document.getElementById('tablebody').insertAdjacentHTML('beforeend', "<tr><th scope='row'>" + (i+1) + "</th><td>" + data[i].Team + "</td><td>" + data[i].Totaal + "</td></tr>");
        }
    }

    // De caption zal getoond worden telkens de data ververst wordt. 
    document.getElementById("caption").innerHTML = "Laatste update: " + (new Date()).toLocaleTimeString();
  }

  // Countdown timer
  var count = 60, timer = setInterval(function() {
    $("#counter").html(count--);
    if(count == 0){
        count = 60;
        init();
    }
  }, 1000)

  window.addEventListener('DOMContentLoaded', init)
</script>
</html>